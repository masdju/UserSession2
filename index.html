<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Trial User Session - Sign In</title>
    <link rel="stylesheet" href="js/jquery.mobile-1.4.5.min.css" />
    <script src="js/jquery-1.11.2.min.js"></script>
    <script src="js/jquery.mobile-1.4.5.min.js"></script>
    <script type="text/javascript">
        $(document).on('pagecreate', '#signIn', function () {
            $('#btnSignIn').on('click', function () {
                alert('Called!');

                var credential = {
                    userName: $('#dfsUserName').val(),
                    password: $('#dfsPassword').val()
                };

                alert(credential.userName + ' ^ ' + credential.password);

                // Post credential
                $.post(
                   "http://mobile77.webatu.com/_php_backend/UserSession/sign_in.php",
                   credential,
                   function (dataCredential, status) {
                       alert('success: ' + ' ^' + dataCredential.success + ' ^ ' + dataCredential.userName + ' ^ ' + dataCredential.password);
                       //alert('success ');
                       if (dataCredential.success == 1) {
                           // jQM 1.3.2 and below
                           //$.mobile.changePage("home.html");

                           // jQM 1.4
                           //$.mobile.pageContainer.pagecontainer("change", "#page_id" or "URL");
                           //$.mobile.pageContainer.pagecontainer("change", "home.html"); GA JALAN!!!

                           // JS not execute properly when using $.mobile.changePage("home.html")
                           alert('Go to Home ');
						   window.location = 'home.html';
                       }
                       else {
                           alert('Login gagal!');
                       }
                   },
                   "json"
                );
            });
            $('#navtoHome').on('click', function () {
                window.location = 'home.html';
            });
        });
    </script>
</head>
<body>
    <div data-role="page" id="signIn">
        <div data-role="header">
            <h1>Trial User Session - Sign In</h1>
        </div>
        <div data-role="main" class="ui-field-contain">
            <p>Please enter your credential:</p>
            <div class="ui-field-contain">
                <label for="dfUserName" class="ui-hidden-accessible">User Name:</label>
                <input name="dfUserName" id="dfsUserName" placeholder="User name" value="" type="text">
                <label for="dfPassword" class="ui-hidden-accessible">Password:</label>
                <input name="dfPassword" id="dfsPassword" placeholder="Password" value="" type="password">
                <label for="btnSignIn" class="ui-hidden-accessible">Sign In:</label>
                <button class="ui-shadow ui-btn ui-corner-all" type="button" id="btnSignIn">Sign In</button>
            </div>
			<a href="#" id="navtoHome">Home</a>
        </div>
        <div data-role="footer">By Masdju</div>
    </div>
</body>
</html>
